<!DOCTYPE html>
<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <script>
        $(document).ready(function () {
            $('[name="submit"]').click(function () {

                // kutsutaan funktiota
                fetchPhone();

            });
        });
    </script>
</head>

<body>
    <form id="form" name="form">
        <th>Syötä nimi:</th>
        <td>
            <input name="nimi" id="nimi" type="text" value="" maxlength="35" size="35" />
        </td>
        <td>
            <input name="puhelin" id="puhelin" type="text" value="" maxlength="35" size="35" />
        </td>

        <td>
            <input id="fetch" name="submit" type="button" value="Hae puhelinnumero" />
        </td>
    </form>
    <script>
        function fetchPhone() {
            // otetaan käyttäjän syöttämä nimi
            let name = $("#nimi").val();
            let found = false;


            $.getJSON("http://localhost:3000/data", function (data) {

                $.each(data, function (key, val) {

                    if (val.nimi === name) {
                        $("#puhelin").val(val.puhelin);
                        found = true;
                    }

                });

                if (!found) {
                    $("#puhelin").val("Ei löydy");
                }


            });

        }
    </script>
</body>

</html>